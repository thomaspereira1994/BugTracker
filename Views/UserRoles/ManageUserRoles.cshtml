@using BugTracker.Models.ViewModels

@model IEnumerable<ManageUserRolesViewModel>

@{
    ManageUserRolesViewModel[] modelList = Model.ToArray();
}



<main class="flex-shrink-0">
    <div class="container h-100 minHeight">
        <div class="row row-cols-1 row-cols-md-2 gx-2 h-100">
            @for (int i = 0; i <= modelList.Length -1; i++)
            {
                <div class="col">
                    <div class="card col-12 m-3">
                        <div class="card-body">
                            <p class="text-muted font-13 m-b-30">
                                This form displays the current roles assigned to the user: <strong class="text-info">@modelList[i].BTUser.FullName</strong>.
                                Use the dropdown to select the roles this user should be assigned.
                                Once roles are selected, click "Assign Roles" to submit the form.
                            </p>
                            <hr>
                            <form asp-action="ManageUserRoles" asp-controller="UserRoles" method=post>
                                <input type="hidden" asp-for="@modelList[i].BTUser.Id">
                                <div class="row">
                                    <div class="col-6">
                                        <div class="form-group">
                                            <label asp-for="@modelList[i].Roles" class="custom-label">Roles for @modelList[i].BTUser.FullName</label>
                                            <select asp-for="@modelList[i].SelectedRoles" class="form-control" asp-items="@modelList[i].Roles" multiple></select>
                                            <hr>
                                        </div>
                                        <div class="form-group">
                                            <input type="submit" value="Assign Role" class="btn btn-info" asp-route-member="@modelList[i]">
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
            }
        </div>
    </div>
</main>